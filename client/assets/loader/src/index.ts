//||------------------------------------------------------------------------------------------------||
//|| Main
//|| Loader for the Client
//||------------------------------------------------------------------------------------------------||

//||------------------------------------------------------------------------------------------------||
//|| Import
//||------------------------------------------------------------------------------------------------||

import Utils      from './utils';

//||------------------------------------------------------------------------------------------------||
//|| Call API to Check Session Validity
//||------------------------------------------------------------------------------------------------||

      const start = async() => {
            console.log(`ComplyAge Client Loader - ${Utils.gset("version")}`);
            console.log(`API Key: ${Utils.gset('apiKey')}`);
            try {
                  const verified = await Utils.checkSession();
                  if (verified === null) {
                        console.log("Session is invalid. Redirecting to age gate.");
                        Utils.ageGate();
                  } else {
                        console.log("Session is valid.");
                  }
            } catch (error) {
                  console.error("An error occurred:", error); 
            }
      };(async () => { await start(); })();


//||------------------------------------------------------------------------------------------------||
//|| We Have a Session Cookie - Check API for Session Validity
//||------------------------------------------------------------------------------------------------||

//||------------------------------------------------------------------------------------------------||
//|| Session Valid - Cool
//||------------------------------------------------------------------------------------------------||

//||------------------------------------------------------------------------------------------------||
//|| Session Valid - Cool
//||------------------------------------------------------------------------------------------------||

//||------------------------------------------------------------------------------------------------||
//|| Session Invalid - Need Refresh?
//||------------------------------------------------------------------------------------------------||

//||------------------------------------------------------------------------------------------------||
//|| Session Recheck - Bad. Fail
//||------------------------------------------------------------------------------------------------||

//||------------------------------------------------------------------------------------------------||
//|| Session Recheck - Good. Bye!
//||------------------------------------------------------------------------------------------------||

//||------------------------------------------------------------------------------------------------||
//|| No Cookie. Lets check zone/public key
//||------------------------------------------------------------------------------------------------||


//||------------------------------------------------------------------------------------------------||
//|| No Enforcement - Write NoCheck Session
//||------------------------------------------------------------------------------------------------||


//||------------------------------------------------------------------------------------------------||
//|| Enforcement - Show Enforcement Page
//||------------------------------------------------------------------------------------------------||



